var Zt=Object.defineProperty;var mt=a=>{throw TypeError(a)};var er=(a,e,t)=>e in a?Zt(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var w=(a,e,t)=>er(a,typeof e!="symbol"?e+"":e,t),Xe=(a,e,t)=>e.has(a)||mt("Cannot "+t);var b=(a,e,t)=>(Xe(a,e,"read from private field"),t?t.call(a):e.get(a)),x=(a,e,t)=>e.has(a)?mt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(a):e.set(a,t),L=(a,e,t,n)=>(Xe(a,e,"write to private field"),n?n.call(a,t):e.set(a,t),t),N=(a,e,t)=>(Xe(a,e,"access private method"),t);import{c as k}from"./ApiRef-DDVPwL0h.js";import{x as $,i as H,v as X,t as ie}from"./defaultTheme-DT8oR2d2.js";import{_ as T}from"./classCallCheck-BNzALLS0.js";import{_ as qe,a as q,b as je}from"./inherits-BaoXGylq.js";import{_ as tr}from"./toArray-BGA7wbLE.js";import{O as ze}from"./index-D9gx4uDp.js";import{a as nt,b as rr}from"./TranslationApi-NYdUF01F.js";import{r as Ze}from"./index-DSHF18-l.js";var Ie=(a=>(a.SignedIn="SignedIn",a.SignedOut="SignedOut",a))(Ie||{});const sn=k({id:"core.auth.google"}),an=k({id:"core.auth.github"}),on=k({id:"core.auth.okta"}),un=k({id:"core.auth.gitlab"}),cn=k({id:"core.auth.microsoft"}),ln=k({id:"core.auth.onelogin"}),fn=k({id:"core.auth.bitbucket"});k({id:"core.auth.bitbucket-server"});const gn=k({id:"core.auth.atlassian"});k({id:"core.auth.vmware-cloud"});const hn=k({id:"core.alert"});var Fe=(a=>(a[a.None=0]="None",a[a.Active=1]="Active",a))(Fe||{});const dn=k({id:"core.featureflags"}),pn=k({id:"core.identity"}),vn=k({id:"core.oauthrequest"});function nr(a){return new Promise((e,t)=>{const n=a.width||500,r=a.height||700,i=window.screen.width/2-n/2,s=window.screen.height/2-r/2,o=window.open(a.url,a.name,`menubar=no,location=no,resizable=no,scrollbars=no,status=no,width=${n},height=${r},top=${s},left=${i}`);let u="";if(!o||typeof o.closed>"u"||o.closed){const g=new Error("Failed to open auth popup.");g.name="PopupRejectedError",t(g);return}const l=g=>{if(g.source!==o||g.origin!==a.origin)return;const{data:h}=g;if(h.type==="config_info"){u=h.targetOrigin;return}if(h.type!=="authorization_response")return;const p=h;if("error"in p){const y=new Error(p.error.message);y.name=p.error.name,t(y)}else e(p.response);c()},f=setInterval(()=>{if(o.closed){const g=`Login failed, ${u&&u!==window.location.origin?`Incorrect app origin, expected ${u}`:"popup was closed"}`,h=new Error(g);h.name="PopupClosedError",t(h),c()}},100);function c(){window.removeEventListener("message",l),clearInterval(f)}window.addEventListener("message",l)})}let yt=!1;function ir(a){return[...a].join(" ")}class sr{constructor(e){w(this,"discoveryApi");w(this,"environment");w(this,"provider");w(this,"joinScopesFunc");w(this,"authRequester");w(this,"sessionTransform");w(this,"enableExperimentalRedirectFlow");w(this,"popupOptions");const{configApi:t,discoveryApi:n,environment:r,provider:i,joinScopes:s=ir,oauthRequestApi:o,sessionTransform:u=f=>f,popupOptions:l}=e;!yt&&!t&&(console.warn("DEPRECATION WARNING: Authentication providers require a configApi instance to configure the authentication flow. Please provide one to the authentication provider constructor."),yt=!0),this.enableExperimentalRedirectFlow=t?t.getOptionalBoolean("enableExperimentalRedirectFlow")??!1:!1,this.authRequester=o.createAuthRequester({provider:i,onAuthRequest:async f=>this.enableExperimentalRedirectFlow?this.executeRedirect(f):this.showPopup(f)}),this.discoveryApi=n,this.environment=r,this.provider=i,this.joinScopesFunc=s,this.sessionTransform=u,this.popupOptions=l}async createSession(e){return e.instantPopup?this.enableExperimentalRedirectFlow?this.executeRedirect(e.scopes):this.showPopup(e.scopes):this.authRequester(e.scopes)}async refreshSession(e){const t=await fetch(await this.buildUrl("/refresh",{optional:!0,...e&&{scope:this.joinScopesFunc(e)}}),{headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(r=>{throw new Error(`Auth refresh request failed, ${r}`)});if(!t.ok){const r=new Error(`Auth refresh request failed, ${t.statusText}`);throw r.status=t.status,r}const n=await t.json();if(n.error){const r=new Error(n.error.message);throw n.error.name&&(r.name=n.error.name),r}return await this.sessionTransform(n)}async removeSession(){const e=await fetch(await this.buildUrl("/logout"),{method:"POST",headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(t=>{throw new Error(`Logout request failed, ${t}`)});if(!e.ok){const t=new Error(`Logout request failed, ${e.statusText}`);throw t.status=e.status,t}}async showPopup(e){var o,u,l,f,c,g,h,p;const t=this.joinScopesFunc(e),n=await this.buildUrl("/start",{scope:t,origin:window.location.origin,flow:"popup"}),r=(u=(o=this.popupOptions)==null?void 0:o.size)!=null&&u.fullscreen?window.screen.width:((f=(l=this.popupOptions)==null?void 0:l.size)==null?void 0:f.width)||450,i=(g=(c=this.popupOptions)==null?void 0:c.size)!=null&&g.fullscreen?window.screen.height:((p=(h=this.popupOptions)==null?void 0:h.size)==null?void 0:p.height)||730,s=await nr({url:n,name:`${this.provider.title} Login`,origin:new URL(n).origin,width:r,height:i});return await this.sessionTransform(s)}async executeRedirect(e){const t=this.joinScopesFunc(e);return window.location.href=await this.buildUrl("/start",{scope:t,origin:window.location.origin,redirectUrl:window.location.href,flow:"redirect"}),new Promise(()=>{})}async buildUrl(e,t){const n=await this.discoveryApi.getBaseUrl("auth"),r=this.buildQueryString({...t,env:this.environment});return`${n}/${this.provider.id}${e}${r}`}buildQueryString(e){if(!e)return"";const t=Object.entries(e).map(([n,r])=>{if(typeof r=="string")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r)return encodeURIComponent(n)}).filter(Boolean).join("&");return t?`?${t}`:""}}function Bt(a,e){for(const t of e)if(!a.has(t))return!1;return!0}class ar{constructor(e){this.options=e}sessionExistsAndHasScope(e,t){if(!e)return!1;if(!t||this.options.sessionScopes===void 0)return!0;const n=this.options.sessionScopes(e);return Bt(n,t)}getExtendedScope(e,t){const n=new Set(this.options.defaultScopes);if(e&&this.options.sessionScopes!==void 0){const r=this.options.sessionScopes(e);for(const i of r)n.add(i)}if(t)for(const r of t)n.add(r);return n}}class qt{constructor(){w(this,"isClosed",!1);w(this,"terminatingError");w(this,"observable",new ze(e=>this.isClosed?(this.terminatingError?e.error(this.terminatingError):e.complete(),()=>{}):(this.subscribers.add(e),()=>{this.subscribers.delete(e)})));w(this,"subscribers",new Set)}[Symbol.observable](){return this}get closed(){return this.isClosed}next(e){if(this.isClosed)throw new Error("PublishSubject is closed");this.subscribers.forEach(t=>t.next(e))}error(e){if(this.isClosed)throw new Error("PublishSubject is closed");this.isClosed=!0,this.terminatingError=e,this.subscribers.forEach(t=>t.error(e))}complete(){if(this.isClosed)throw new Error("PublishSubject is closed");this.isClosed=!0,this.subscribers.forEach(e=>e.complete())}subscribe(e,t,n){const r=typeof e=="function"?{next:e,error:t,complete:n}:e;return this.observable.subscribe(r)}}class He{constructor(e){w(this,"isClosed");w(this,"currentValue");w(this,"terminatingError");w(this,"observable");w(this,"subscribers",new Set);this.isClosed=!1,this.currentValue=e,this.terminatingError=void 0,this.observable=new ze(t=>this.isClosed?(this.terminatingError?t.error(this.terminatingError):t.complete(),()=>{}):(t.next(this.currentValue),this.subscribers.add(t),()=>{this.subscribers.delete(t)}))}[Symbol.observable](){return this}get closed(){return this.isClosed}next(e){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.currentValue=e,this.subscribers.forEach(t=>t.next(e))}error(e){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.isClosed=!0,this.terminatingError=e,this.subscribers.forEach(t=>t.error(e))}complete(){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.isClosed=!0,this.subscribers.forEach(e=>e.complete())}subscribe(e,t,n){const r=typeof e=="function"?{next:e,error:t,complete:n}:e;return this.observable.subscribe(r)}}class or{constructor(){w(this,"subject",new He(Ie.SignedOut));w(this,"signedIn",!1)}setIsSignedIn(e){this.signedIn!==e&&(this.signedIn=e,this.subject.next(this.signedIn?Ie.SignedIn:Ie.SignedOut))}sessionState$(){return this.subject}}class ur{constructor(e){w(this,"connector");w(this,"helper");w(this,"sessionScopesFunc");w(this,"sessionShouldRefreshFunc");w(this,"stateTracker",new or);w(this,"refreshPromise");w(this,"currentSession");const{connector:t,defaultScopes:n=new Set,sessionScopes:r,sessionShouldRefresh:i}=e;this.connector=t,this.sessionScopesFunc=r,this.sessionShouldRefreshFunc=i,this.helper=new ar({sessionScopes:r,defaultScopes:n})}async getSession(e){if(this.helper.sessionExistsAndHasScope(this.currentSession,e.scopes)){if(!this.sessionShouldRefreshFunc(this.currentSession))return this.currentSession;try{const n=await this.collapsedSessionRefresh(e.scopes),r=this.sessionScopesFunc(this.currentSession),i=this.sessionScopesFunc(n);return Bt(i,r)&&(this.currentSession=n),n}catch(n){if(e.optional)return;throw n}}if(!e.instantPopup)try{const t=await this.collapsedSessionRefresh(e.scopes);return this.currentSession=t,this.getSession(e)}catch{}if(!e.optional)return this.currentSession=await this.connector.createSession({...e,scopes:this.helper.getExtendedScope(this.currentSession,e.scopes)}),this.stateTracker.setIsSignedIn(!0),this.currentSession}async removeSession(){this.currentSession=void 0,await this.connector.removeSession(),this.stateTracker.setIsSignedIn(!1)}sessionState$(){return this.stateTracker.sessionState$()}async collapsedSessionRefresh(e){if(this.refreshPromise)return this.refreshPromise;this.refreshPromise=this.connector.refreshSession(this.helper.getExtendedScope(this.currentSession,e));try{const t=await this.refreshPromise;if(!this.helper.sessionExistsAndHasScope(t,e))throw new Error("Refreshed session did not receive the required scopes");return this.stateTracker.setIsSignedIn(!0),t}finally{delete this.refreshPromise}}}const cr={id:"oauth2",title:"Your Identity Provider",icon:()=>null};class B{constructor(e){w(this,"sessionManager");w(this,"scopeTransform");this.sessionManager=e.sessionManager,this.scopeTransform=e.scopeTransform}static create(e){const{configApi:t,discoveryApi:n,environment:r="development",provider:i=cr,oauthRequestApi:s,defaultScopes:o=[],scopeTransform:u=g=>g,popupOptions:l}=e,f=new sr({configApi:t,discoveryApi:n,environment:r,provider:i,oauthRequestApi:s,sessionTransform({backstageIdentity:g,...h}){const p={...h,providerInfo:{idToken:h.providerInfo.idToken,accessToken:h.providerInfo.accessToken,scopes:B.normalizeScopes(u,h.providerInfo.scope),expiresAt:h.providerInfo.expiresInSeconds?new Date(Date.now()+h.providerInfo.expiresInSeconds*1e3):void 0}};return g&&(p.backstageIdentity={token:g.token,identity:g.identity,expiresAt:g.expiresInSeconds?new Date(Date.now()+g.expiresInSeconds*1e3):void 0}),p},popupOptions:l}),c=new ur({connector:f,defaultScopes:new Set(o),sessionScopes:g=>g.providerInfo.scopes,sessionShouldRefresh:g=>{var p,y;let h=1/0;return(p=g.providerInfo)!=null&&p.expiresAt&&(h=Math.min(h,(g.providerInfo.expiresAt.getTime()-Date.now())/1e3)),(y=g.backstageIdentity)!=null&&y.expiresAt&&(h=Math.min(h,(g.backstageIdentity.expiresAt.getTime()-Date.now())/1e3)),h<60*3}});return new B({sessionManager:c,scopeTransform:u})}async signIn(){await this.getAccessToken()}async signOut(){await this.sessionManager.removeSession()}sessionState$(){return this.sessionManager.sessionState$()}async getAccessToken(e,t){const n=B.normalizeScopes(this.scopeTransform,e),r=await this.sessionManager.getSession({...t,scopes:n});return(r==null?void 0:r.providerInfo.accessToken)??""}async getIdToken(e={}){const t=await this.sessionManager.getSession({...e,scopes:new Set(["openid"])});return(t==null?void 0:t.providerInfo.idToken)??""}async getBackstageIdentity(e={}){const t=await this.sessionManager.getSession(e);return t==null?void 0:t.backstageIdentity}async getProfile(e={}){const t=await this.sessionManager.getSession(e);return t==null?void 0:t.profile}static normalizeScopes(e,t){if(!t)return new Set;const n=Array.isArray(t)?t:t.split(/[\s|,]/).filter(Boolean);return new Set(e(n))}}const lr={id:"github",title:"GitHub",icon:()=>null};class mn{static create(e){const{configApi:t,discoveryApi:n,environment:r="development",provider:i=lr,oauthRequestApi:s,defaultScopes:o=["read:user"]}=e;return B.create({configApi:t,discoveryApi:n,oauthRequestApi:s,provider:i,environment:r,defaultScopes:o})}}const fr={id:"gitlab",title:"GitLab",icon:()=>null};class yn{static create(e){const{configApi:t,discoveryApi:n,environment:r="development",provider:i=fr,oauthRequestApi:s,defaultScopes:o=["read_user"]}=e;return B.create({configApi:t,discoveryApi:n,oauthRequestApi:s,provider:i,environment:r,defaultScopes:o})}}const gr={id:"google",title:"Google",icon:()=>null},pe="https://www.googleapis.com/auth/";class bn{static create(e){const{configApi:t,discoveryApi:n,oauthRequestApi:r,environment:i="development",provider:s=gr,defaultScopes:o=["openid",`${pe}userinfo.email`,`${pe}userinfo.profile`]}=e;return B.create({configApi:t,discoveryApi:n,oauthRequestApi:r,provider:s,environment:i,defaultScopes:o,scopeTransform(u){return u.map(l=>l==="openid"?l:l==="profile"||l==="email"?`${pe}userinfo.${l}`:l.startsWith(pe)?l:`${pe}${l}`)}})}}const hr={id:"okta",title:"Okta",icon:()=>null},dr=new Set(["openid","profile","email","phone","address","groups","offline_access"]),bt="okta.";class wn{static create(e){const{configApi:t,discoveryApi:n,environment:r="development",provider:i=hr,oauthRequestApi:s,defaultScopes:o=["openid","email","profile","offline_access"]}=e;return B.create({configApi:t,discoveryApi:n,oauthRequestApi:s,provider:i,environment:r,defaultScopes:o,scopeTransform(u){return u.map(l=>dr.has(l)||l.startsWith(bt)?l:`${bt}${l}`)}})}}class Sn{constructor(){w(this,"subject",new qt)}post(e){this.subject.next(e)}alert$(){return this.subject}}const pr=/^[a-z][a-z0-9]*(?:[-_][a-z][a-z0-9]*)*$/i;function $e(a){return typeof a=="object"&&a!==null&&!Array.isArray(a)}function it(a){return typeof a!="object"||a===null?a:Array.isArray(a)?a.map(it):Object.fromEntries(Object.entries(a).map(([e,t])=>[e,it(t)]))}function ye(a,e){if(a===null)return;if(a===void 0)return e===void 0?void 0:ye(e);if(typeof a!="object"||Array.isArray(a))return a;const t=$e(e)?e:{},n={};for(const r of new Set([...Object.keys(a),...Object.keys(t)])){const i=ye(a[r],t[r]);i!==void 0&&(n[r]=i)}return n}function et(a){if(a===null)return"null";if(Array.isArray(a))return"array";const e=typeof a;return e==="number"&&isNaN(a)?"nan":e==="string"&&a===""?"empty-string":e}const E={type(a,e,t,n){return`Invalid type in config for key '${a}' in '${e}', got ${t}, wanted ${n}`},missing(a,e){return`Missing required config value at '${a}' in '${e}'`},convert(a,e,t){return`Unable to convert config value for key '${a}' in '${e}' to a ${t}`}};class Te{constructor(e,t="mock-config",n,r=""){w(this,"filteredKeys");w(this,"notifiedFilteredKeys",new Set);this.data=e,this.context=t,this.fallback=n,this.prefix=r}static fromConfigs(e){return e.length===0?new Te(void 0):e.reduce((t,{data:n,context:r,filteredKeys:i,deprecatedKeys:s})=>{const o=new Te(n,r,t);if(o.filteredKeys=i,s)for(const{key:u,description:l}of s)console.warn(`The configuration key '${u}' of ${r} is deprecated and may be removed soon. ${l||""}`);return o},void 0)}has(e){var n;const t=this.readValue(e);return t===null?!1:t!==void 0?!0:((n=this.fallback)==null?void 0:n.has(e))??!1}keys(){var n;const e=this.data?Object.keys(this.data):[],t=((n=this.fallback)==null?void 0:n.keys())??[];return[...new Set([...e,...t])].filter(r=>{var i;return((i=this.data)==null?void 0:i[r])!==null})}get(e){const t=this.getOptional(e);if(t===void 0)throw new Error(E.missing(this.fullKey(e??""),this.context));return t}getOptional(e){var r;const t=it(this.readValue(e)),n=(r=this.fallback)==null?void 0:r.getOptional(e);if(t!==null)return t===void 0?ye(n):n===void 0?ye(t):ye(t,n)}getConfig(e){const t=this.getOptionalConfig(e);if(t===void 0)throw new Error(E.missing(this.fullKey(e),this.context));return t}getOptionalConfig(e){var r;const t=this.readValue(e),n=(r=this.fallback)==null?void 0:r.getOptionalConfig(e);if($e(t))return this.copy(t,e,n);if(t!==null){if(t!==void 0)throw new TypeError(E.type(this.fullKey(e),this.context,et(t),"object"));return n}}getConfigArray(e){const t=this.getOptionalConfigArray(e);if(t===void 0)throw new Error(E.missing(this.fullKey(e),this.context));return t}getOptionalConfigArray(e){const t=this.readConfigValue(e,n=>{if(!Array.isArray(n))return{expected:"object-array"};for(const[r,i]of n.entries())if(!$e(i))return{expected:"object-array",value:i,key:`${e}[${r}]`};return!0});if(t)return t.map((n,r)=>this.copy(n,`${e}[${r}]`))}getNumber(e){const t=this.getOptionalNumber(e);if(t===void 0)throw new Error(E.missing(this.fullKey(e),this.context));return t}getOptionalNumber(e){const t=this.readConfigValue(e,r=>typeof r=="number"||typeof r=="string"||{expected:"number"});if(typeof t=="number"||t===void 0)return t;const n=Number(t);if(!Number.isFinite(n))throw new Error(E.convert(this.fullKey(e),this.context,"number"));return n}getBoolean(e){const t=this.getOptionalBoolean(e);if(t===void 0)throw new Error(E.missing(this.fullKey(e),this.context));return t}getOptionalBoolean(e){const t=this.readConfigValue(e,r=>typeof r=="boolean"||typeof r=="number"||typeof r=="string"||{expected:"boolean"});if(typeof t=="boolean"||t===void 0)return t;const n=String(t).trim();if(/^(?:y|yes|true|1|on)$/i.test(n))return!0;if(/^(?:n|no|false|0|off)$/i.test(n))return!1;throw new Error(E.convert(this.fullKey(e),this.context,"boolean"))}getString(e){const t=this.getOptionalString(e);if(t===void 0)throw new Error(E.missing(this.fullKey(e),this.context));return t}getOptionalString(e){return this.readConfigValue(e,t=>typeof t=="string"&&t!==""||{expected:"string"})}getStringArray(e){const t=this.getOptionalStringArray(e);if(t===void 0)throw new Error(E.missing(this.fullKey(e),this.context));return t}getOptionalStringArray(e){return this.readConfigValue(e,t=>{if(!Array.isArray(t))return{expected:"string-array"};for(const[n,r]of t.entries())if(typeof r!="string"||r==="")return{expected:"string-array",value:r,key:`${e}[${n}]`};return!0})}fullKey(e){return`${this.prefix}${this.prefix?".":""}${e}`}copy(e,t,n){const r=new Te(e,this.context,n,this.fullKey(t));return r.filteredKeys=this.filteredKeys,r}readConfigValue(e,t){var i;const n=this.readValue(e);if(n===void 0)return(i=this.fallback)==null?void 0:i.readConfigValue(e,t);if(n===null)return;const r=t(n);if(r!==!0){const{key:s=e,value:o=n,expected:u}=r;throw new TypeError(E.type(this.fullKey(s),this.context,et(o),u))}return n}readValue(e){const t=e?e.split("."):[];for(const r of t)if(!pr.test(r))throw new TypeError(`Invalid config key '${e}'`);if(this.data===void 0)return;let n=this.data;for(const[r,i]of t.entries())if($e(n))n=n[i];else if(n!=null){const s=this.fullKey(t.slice(0,r).join("."));throw new TypeError(E.type(s,this.context,et(n),"object"))}return n}}class On{constructor(e,t){this.alertApi=e,this.errorApi=t}post(e,t){return t!=null&&t.hidden||this.alertApi.post({message:e.message,severity:"error"}),this.errorApi.post(e,t)}error$(){return this.errorApi.error$()}}class xn{constructor(){w(this,"subject",new qt)}post(e,t){this.subject.next({error:e,context:t})}error$(){return this.subject}}function wt(a){if(a.length<3)throw new Error(`The '${a}' feature flag must have a minimum length of three characters.`);if(a.length>150)throw new Error(`The '${a}' feature flag must not exceed 150 characters.`);if(!a.match(/^[a-z]+[a-z0-9-]+$/))throw new Error(`The '${a}' feature flag must start with a lowercase letter and only contain lowercase letters, numbers and hyphens. Examples: feature-flag-one, alpha, release-2020`)}class Rn{constructor(){w(this,"registeredFeatureFlags",[]);w(this,"flags")}registerFlag(e){wt(e.name),this.registeredFeatureFlags.push(e)}getRegisteredFlags(){return this.registeredFeatureFlags.slice()}isActive(e){return this.flags||(this.flags=this.load()),this.flags.get(e)===Fe.Active}save(e){this.flags||(this.flags=this.load()),e.merge||this.flags.clear();for(const[n,r]of Object.entries(e.states))this.flags.set(n,r);const t=Array.from(this.flags.entries()).filter(([,n])=>n===Fe.Active);window.localStorage.setItem("featureFlags",JSON.stringify(Object.fromEntries(t)))}load(){try{const e=window.localStorage.getItem("featureFlags");if(!e)return new Map;const t=JSON.parse(e);if(typeof t!="object"||t===null||Array.isArray(t))return new Map;const n=Object.entries(t).filter(([r,i])=>(wt(r),i===Fe.Active));return new Map(n)}catch{return new Map}}}function vr(a,e){for(const t of e)if(!a.has(t))return!1;return!0}function mr(a,...e){const t=new Set(a);for(const n of e)for(const r of n)t.add(r);return t}class yr{constructor(){w(this,"requests",[]);w(this,"subject",new He(this.getCurrentPending()))}request(e){return new Promise((t,n)=>{this.requests.push({scopes:e,resolve:t,reject:n}),this.subject.next(this.getCurrentPending())})}resolve(e,t){this.requests=this.requests.filter(n=>vr(e,n.scopes)?(n.resolve(t),!1):!0),this.subject.next(this.getCurrentPending())}reject(e){this.requests.forEach(t=>t.reject(e)),this.requests=[],this.subject.next(this.getCurrentPending())}pending(){return this.subject}getCurrentPending(){const e=this.requests.length===0?void 0:this.requests.slice(1).reduce((t,n)=>mr(t,n.scopes),this.requests[0].scopes);return{scopes:e,resolve:t=>{e&&this.resolve(e,t)},reject:t=>{e&&this.reject(t)}}}}class Ln{constructor(){w(this,"subject",new He([]));w(this,"currentRequests",[]);w(this,"handlerCount",0)}createAuthRequester(e){const t=new yr,n=this.handlerCount;return this.handlerCount++,t.pending().subscribe({next:r=>{const i=this.currentRequests.slice(),s=this.makeAuthRequest(r,e);s?i[n]=s:delete i[n],this.currentRequests=i,this.subject.next(i.filter(Boolean))}}),r=>t.request(r)}makeAuthRequest(e,t){const{scopes:n}=e;if(n)return{provider:t.provider,trigger:async()=>{const r=await t.onAuthRequest(n);e.resolve(r)},reject:()=>{const r=new Error("Login failed, rejected by user");r.name="RejectedError",e.reject(r)}}}authRequest$(){return this.subject}}const ve="language",U="en";var G,V,se;const Be=class Be{constructor(e,t){x(this,G);x(this,V);x(this,se);L(this,G,e),L(this,V,t),L(this,se,new He({language:b(this,V)}))}static create(e){const t=(e==null?void 0:e.availableLanguages)??[U];if(t.length!==new Set(t).size)throw new Error(`Supported languages may not contain duplicates, got '${t.join("', '")}'`);if(!t.includes(U))throw new Error(`Supported languages must include '${U}'`);const n=(e==null?void 0:e.defaultLanguage)??U;if(!t.includes(n))throw new Error(`Initial language must be one of the supported languages, got '${n}'`);return new Be(t,n)}static createWithStorage(e){const t=Be.create(e);if(!window.localStorage)return t;const n=window.localStorage.getItem(ve),{languages:r}=t.getAvailableLanguages();return n&&r.includes(n)&&t.setLanguage(n),t.language$().subscribe(({language:i})=>{i!==window.localStorage.getItem(ve)&&window.localStorage.setItem(ve,i)}),window.addEventListener("storage",i=>{if(i.key===ve){const s=localStorage.getItem(ve)??void 0;s&&t.setLanguage(s)}}),t}getAvailableLanguages(){return{languages:b(this,G).slice()}}setLanguage(e){const t=e??U;if(t!==b(this,V)){if(t&&!b(this,G).includes(t))throw new Error(`Failed to change language to '${t}', available languages are '${b(this,G).join("', '")}'`);L(this,V,t),b(this,se).next({language:t})}}getLanguage(){return{language:b(this,V)}}language$(){return b(this,se)}};G=new WeakMap,V=new WeakMap,se=new WeakMap;let St=Be;function Ot(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),t.push.apply(t,n)}return t}function xt(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ot(Object(t),!0).forEach(function(n){H(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):Ot(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}var br={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){console&&console[e]&&console[e].apply(console,t)}},wr=function(){function a(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};T(this,a),this.init(e,t)}return $(a,[{key:"init",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=t||br,this.options=n,this.debug=n.debug}},{key:"setDebug",value:function(t){this.debug=t}},{key:"log",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"log","",!0)}},{key:"warn",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"warn","",!0)}},{key:"error",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"error","")}},{key:"deprecate",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(t,n,r,i){return i&&!this.debug?null:(typeof t[0]=="string"&&(t[0]="".concat(r).concat(this.prefix," ").concat(t[0])),this.logger[n](t))}},{key:"create",value:function(t){return new a(this.logger,xt(xt({},{prefix:"".concat(this.prefix,":").concat(t,":")}),this.options))}},{key:"clone",value:function(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new a(this.logger,t)}}]),a}(),F=new wr,z=function(){function a(){T(this,a),this.observers={}}return $(a,[{key:"on",value:function(t,n){var r=this;return t.split(" ").forEach(function(i){r.observers[i]=r.observers[i]||[],r.observers[i].push(n)}),this}},{key:"off",value:function(t,n){if(this.observers[t]){if(!n){delete this.observers[t];return}this.observers[t]=this.observers[t].filter(function(r){return r!==n})}}},{key:"emit",value:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(this.observers[t]){var s=[].concat(this.observers[t]);s.forEach(function(u){u.apply(void 0,r)})}if(this.observers["*"]){var o=[].concat(this.observers["*"]);o.forEach(function(u){u.apply(u,[t].concat(r))})}}}]),a}();function me(){var a,e,t=new Promise(function(n,r){a=n,e=r});return t.resolve=a,t.reject=e,t}function Rt(a){return a==null?"":""+a}function Sr(a,e,t){a.forEach(function(n){e[n]&&(t[n]=e[n])})}function at(a,e,t){function n(o){return o&&o.indexOf("###")>-1?o.replace(/###/g,"."):o}function r(){return!a||typeof a=="string"}for(var i=typeof e!="string"?[].concat(e):e.split(".");i.length>1;){if(r())return{};var s=n(i.shift());!a[s]&&t&&(a[s]=new t),Object.prototype.hasOwnProperty.call(a,s)?a=a[s]:a={}}return r()?{}:{obj:a,k:n(i.shift())}}function Lt(a,e,t){var n=at(a,e,Object),r=n.obj,i=n.k;r[i]=t}function Or(a,e,t,n){var r=at(a,e,Object),i=r.obj,s=r.k;i[s]=i[s]||[],i[s].push(t)}function Ke(a,e){var t=at(a,e),n=t.obj,r=t.k;if(n)return n[r]}function xr(a,e,t){var n=Ke(a,t);return n!==void 0?n:Ke(e,t)}function zt(a,e,t){for(var n in e)n!=="__proto__"&&n!=="constructor"&&(n in a?typeof a[n]=="string"||a[n]instanceof String||typeof e[n]=="string"||e[n]instanceof String?t&&(a[n]=e[n]):zt(a[n],e[n],t):a[n]=e[n]);return a}function re(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var Rr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function Lr(a){return typeof a=="string"?a.replace(/[&<>"'\/]/g,function(e){return Rr[e]}):a}var Je=typeof window<"u"&&window.navigator&&typeof window.navigator.userAgentData>"u"&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,Pr=[" ",",","?","!",";"];function jr(a,e,t){e=e||"",t=t||"";var n=Pr.filter(function(o){return e.indexOf(o)<0&&t.indexOf(o)<0});if(n.length===0)return!0;var r=new RegExp("(".concat(n.map(function(o){return o==="?"?"\\?":o}).join("|"),")")),i=!r.test(a);if(!i){var s=a.indexOf(t);s>0&&!r.test(a.substring(0,s))&&(i=!0)}return i}function Ue(a,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(a){if(a[e])return a[e];for(var n=e.split(t),r=a,i=0;i<n.length;++i){if(!r||typeof r[n[i]]=="string"&&i+1<n.length)return;if(r[n[i]]===void 0){for(var s=2,o=n.slice(i,i+s).join(t),u=r[o];u===void 0&&n.length>i+s;)s++,o=n.slice(i,i+s).join(t),u=r[o];if(u===void 0)return;if(u===null)return null;if(e.endsWith(o)){if(typeof u=="string")return u;if(o&&typeof u[o]=="string")return u[o]}var l=n.slice(i+s).join(t);return l?Ue(u,l,t):void 0}r=r[n[i]]}return r}}function Pt(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),t.push.apply(t,n)}return t}function Ce(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Pt(Object(t),!0).forEach(function(n){H(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):Pt(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}function kr(a){var e=Er();return function(){var n=q(a),r;if(e){var i=q(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return je(this,r)}}function Er(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Ar=function(a){qe(t,a);var e=kr(t);function t(n){var r,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};return T(this,t),r=e.call(this),Je&&z.call(X(r)),r.data=n||{},r.options=i,r.options.keySeparator===void 0&&(r.options.keySeparator="."),r.options.ignoreJSONStructure===void 0&&(r.options.ignoreJSONStructure=!0),r}return $(t,[{key:"addNamespaces",value:function(r){this.options.ns.indexOf(r)<0&&this.options.ns.push(r)}},{key:"removeNamespaces",value:function(r){var i=this.options.ns.indexOf(r);i>-1&&this.options.ns.splice(i,1)}},{key:"getResource",value:function(r,i,s){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},u=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator,l=o.ignoreJSONStructure!==void 0?o.ignoreJSONStructure:this.options.ignoreJSONStructure,f=[r,i];s&&typeof s!="string"&&(f=f.concat(s)),s&&typeof s=="string"&&(f=f.concat(u?s.split(u):s)),r.indexOf(".")>-1&&(f=r.split("."));var c=Ke(this.data,f);return c||!l||typeof s!="string"?c:Ue(this.data&&this.data[r]&&this.data[r][i],s,u)}},{key:"addResource",value:function(r,i,s,o){var u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},l=u.keySeparator!==void 0?u.keySeparator:this.options.keySeparator,f=[r,i];s&&(f=f.concat(l?s.split(l):s)),r.indexOf(".")>-1&&(f=r.split("."),o=i,i=f[1]),this.addNamespaces(i),Lt(this.data,f,o),u.silent||this.emit("added",r,i,s,o)}},{key:"addResources",value:function(r,i,s){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(var u in s)(typeof s[u]=="string"||Object.prototype.toString.apply(s[u])==="[object Array]")&&this.addResource(r,i,u,s[u],{silent:!0});o.silent||this.emit("added",r,i,s)}},{key:"addResourceBundle",value:function(r,i,s,o,u){var l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},f=[r,i];r.indexOf(".")>-1&&(f=r.split("."),o=s,s=i,i=f[1]),this.addNamespaces(i);var c=Ke(this.data,f)||{};o?zt(c,s,u):c=Ce(Ce({},c),s),Lt(this.data,f,c),l.silent||this.emit("added",r,i,s)}},{key:"removeResourceBundle",value:function(r,i){this.hasResourceBundle(r,i)&&delete this.data[r][i],this.removeNamespaces(i),this.emit("removed",r,i)}},{key:"hasResourceBundle",value:function(r,i){return this.getResource(r,i)!==void 0}},{key:"getResourceBundle",value:function(r,i){return i||(i=this.options.defaultNS),this.options.compatibilityAPI==="v1"?Ce(Ce({},{}),this.getResource(r,i)):this.getResource(r,i)}},{key:"getDataByLanguage",value:function(r){return this.data[r]}},{key:"hasLanguageSomeTranslations",value:function(r){var i=this.getDataByLanguage(r),s=i&&Object.keys(i)||[];return!!s.find(function(o){return i[o]&&Object.keys(i[o]).length>0})}},{key:"toJSON",value:function(){return this.data}}]),t}(z),Ht={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,n,r,i){var s=this;return e.forEach(function(o){s.processors[o]&&(t=s.processors[o].process(t,n,r,i))}),t}};function jt(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),t.push.apply(t,n)}return t}function R(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?jt(Object(t),!0).forEach(function(n){H(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):jt(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}function Cr(a){var e=Nr();return function(){var n=q(a),r;if(e){var i=q(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return je(this,r)}}function Nr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var kt={},Et=function(a){qe(t,a);var e=Cr(t);function t(n){var r,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return T(this,t),r=e.call(this),Je&&z.call(X(r)),Sr(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],n,X(r)),r.options=i,r.options.keySeparator===void 0&&(r.options.keySeparator="."),r.logger=F.create("translator"),r}return $(t,[{key:"changeLanguage",value:function(r){r&&(this.language=r)}},{key:"exists",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(r==null)return!1;var s=this.resolve(r,i);return s&&s.res!==void 0}},{key:"extractFromKey",value:function(r,i){var s=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;s===void 0&&(s=":");var o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,u=i.ns||this.options.defaultNS||[],l=s&&r.indexOf(s)>-1,f=!this.options.userDefinedKeySeparator&&!i.keySeparator&&!this.options.userDefinedNsSeparator&&!i.nsSeparator&&!jr(r,s,o);if(l&&!f){var c=r.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:r,namespaces:u};var g=r.split(s);(s!==o||s===o&&this.options.ns.indexOf(g[0])>-1)&&(u=g.shift()),r=g.join(o)}return typeof u=="string"&&(u=[u]),{key:r,namespaces:u}}},{key:"translate",value:function(r,i,s){var o=this;if(ie(i)!=="object"&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),ie(i)==="object"&&(i=R({},i)),i||(i={}),r==null)return"";Array.isArray(r)||(r=[String(r)]);var u=i.returnDetails!==void 0?i.returnDetails:this.options.returnDetails,l=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,f=this.extractFromKey(r[r.length-1],i),c=f.key,g=f.namespaces,h=g[g.length-1],p=i.lng||this.language,y=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(p&&p.toLowerCase()==="cimode"){if(y){var m=i.nsSeparator||this.options.nsSeparator;return u?{res:"".concat(h).concat(m).concat(c),usedKey:c,exactUsedKey:c,usedLng:p,usedNS:h}:"".concat(h).concat(m).concat(c)}return u?{res:c,usedKey:c,exactUsedKey:c,usedLng:p,usedNS:h}:c}var d=this.resolve(r,i),v=d&&d.res,O=d&&d.usedKey||c,S=d&&d.exactUsedKey||c,j=Object.prototype.toString.apply(v),D=["[object Number]","[object Function]","[object RegExp]"],J=i.joinArrays!==void 0?i.joinArrays:this.options.joinArrays,ce=!this.i18nFormat||this.i18nFormat.handleAsObject,le=typeof v!="string"&&typeof v!="boolean"&&typeof v!="number";if(ce&&v&&le&&D.indexOf(j)<0&&!(typeof J=="string"&&j==="[object Array]")){if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var Z=this.options.returnedObjectHandler?this.options.returnedObjectHandler(O,v,R(R({},i),{},{ns:g})):"key '".concat(c," (").concat(this.language,")' returned an object instead of string.");return u?(d.res=Z,d):Z}if(l){var lt=j==="[object Array]",ke=lt?[]:{},Wt=lt?S:O;for(var ee in v)if(Object.prototype.hasOwnProperty.call(v,ee)){var ft="".concat(Wt).concat(l).concat(ee);ke[ee]=this.translate(ft,R(R({},i),{joinArrays:!1,ns:g})),ke[ee]===ft&&(ke[ee]=v[ee])}v=ke}}else if(ce&&typeof J=="string"&&j==="[object Array]")v=v.join(J),v&&(v=this.extendTranslation(v,r,i,s));else{var Ee=!1,fe=!1,gt=i.count!==void 0&&typeof i.count!="string",Ge=t.hasDefaultValue(i),Yt=gt?this.pluralResolver.getSuffix(p,i.count,i):"",ge=i["defaultValue".concat(Yt)]||i.defaultValue;!this.isValidLookup(v)&&Ge&&(Ee=!0,v=ge),this.isValidLookup(v)||(fe=!0,v=c);var Qt=i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,Xt=Qt&&fe?void 0:v,he=Ge&&ge!==v&&this.options.updateMissing;if(fe||Ee||he){if(this.logger.log(he?"updateKey":"missingKey",p,h,c,he?ge:v),l){var ht=this.resolve(c,R(R({},i),{},{keySeparator:!1}));ht&&ht.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var de=[],Ae=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Ae&&Ae[0])for(var We=0;We<Ae.length;We++)de.push(Ae[We]);else this.options.saveMissingTo==="all"?de=this.languageUtils.toResolveHierarchy(i.lng||this.language):de.push(i.lng||this.language);var dt=function(te,Qe,pt){var vt=Ge&&pt!==v?pt:Xt;o.options.missingKeyHandler?o.options.missingKeyHandler(te,h,Qe,vt,he,i):o.backendConnector&&o.backendConnector.saveMissing&&o.backendConnector.saveMissing(te,h,Qe,vt,he,i),o.emit("missingKey",te,h,Qe,v)};this.options.saveMissing&&(this.options.saveMissingPlurals&&gt?de.forEach(function(Ye){o.pluralResolver.getSuffixes(Ye,i).forEach(function(te){dt([Ye],c+te,i["defaultValue".concat(te)]||ge)})}):dt(de,c,ge))}v=this.extendTranslation(v,r,i,d,s),fe&&v===c&&this.options.appendNamespaceToMissingKey&&(v="".concat(h,":").concat(c)),(fe||Ee)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?v=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(h,":").concat(c):c,Ee?v:void 0):v=this.options.parseMissingKeyHandler(v))}return u?(d.res=v,d):v}},{key:"extendTranslation",value:function(r,i,s,o,u){var l=this;if(this.i18nFormat&&this.i18nFormat.parse)r=this.i18nFormat.parse(r,R(R({},this.options.interpolation.defaultVariables),s),o.usedLng,o.usedNS,o.usedKey,{resolved:o});else if(!s.skipInterpolation){s.interpolation&&this.interpolator.init(R(R({},s),{interpolation:R(R({},this.options.interpolation),s.interpolation)}));var f=typeof r=="string"&&(s&&s.interpolation&&s.interpolation.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),c;if(f){var g=r.match(this.interpolator.nestingRegexp);c=g&&g.length}var h=s.replace&&typeof s.replace!="string"?s.replace:s;if(this.options.interpolation.defaultVariables&&(h=R(R({},this.options.interpolation.defaultVariables),h)),r=this.interpolator.interpolate(r,h,s.lng||this.language,s),f){var p=r.match(this.interpolator.nestingRegexp),y=p&&p.length;c<y&&(s.nest=!1)}!s.lng&&this.options.compatibilityAPI!=="v1"&&o&&o.res&&(s.lng=o.usedLng),s.nest!==!1&&(r=this.interpolator.nest(r,function(){for(var v=arguments.length,O=new Array(v),S=0;S<v;S++)O[S]=arguments[S];return u&&u[0]===O[0]&&!s.context?(l.logger.warn("It seems you are nesting recursively key: ".concat(O[0]," in key: ").concat(i[0])),null):l.translate.apply(l,O.concat([i]))},s)),s.interpolation&&this.interpolator.reset()}var m=s.postProcess||this.options.postProcess,d=typeof m=="string"?[m]:m;return r!=null&&d&&d.length&&s.applyPostProcessor!==!1&&(r=Ht.handle(d,r,i,this.options&&this.options.postProcessPassResolved?R({i18nResolved:o},s):s,this)),r}},{key:"resolve",value:function(r){var i=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o,u,l,f,c;return typeof r=="string"&&(r=[r]),r.forEach(function(g){if(!i.isValidLookup(o)){var h=i.extractFromKey(g,s),p=h.key;u=p;var y=h.namespaces;i.options.fallbackNS&&(y=y.concat(i.options.fallbackNS));var m=s.count!==void 0&&typeof s.count!="string",d=m&&!s.ordinal&&s.count===0&&i.pluralResolver.shouldUseIntlApi(),v=s.context!==void 0&&(typeof s.context=="string"||typeof s.context=="number")&&s.context!=="",O=s.lngs?s.lngs:i.languageUtils.toResolveHierarchy(s.lng||i.language,s.fallbackLng);y.forEach(function(S){i.isValidLookup(o)||(c=S,!kt["".concat(O[0],"-").concat(S)]&&i.utils&&i.utils.hasLoadedNamespace&&!i.utils.hasLoadedNamespace(c)&&(kt["".concat(O[0],"-").concat(S)]=!0,i.logger.warn('key "'.concat(u,'" for languages "').concat(O.join(", "),`" won't get resolved as namespace "`).concat(c,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),O.forEach(function(j){if(!i.isValidLookup(o)){f=j;var D=[p];if(i.i18nFormat&&i.i18nFormat.addLookupKeys)i.i18nFormat.addLookupKeys(D,p,j,S,s);else{var J;m&&(J=i.pluralResolver.getSuffix(j,s.count,s));var ce="".concat(i.options.pluralSeparator,"zero");if(m&&(D.push(p+J),d&&D.push(p+ce)),v){var le="".concat(p).concat(i.options.contextSeparator).concat(s.context);D.push(le),m&&(D.push(le+J),d&&D.push(le+ce))}}for(var Z;Z=D.pop();)i.isValidLookup(o)||(l=Z,o=i.getResource(j,S,Z,s))}}))})}}),{res:o,usedKey:u,exactUsedKey:l,usedLng:f,usedNS:c}}},{key:"isValidLookup",value:function(r){return r!==void 0&&!(!this.options.returnNull&&r===null)&&!(!this.options.returnEmptyString&&r==="")}},{key:"getResource",value:function(r,i,s){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(r,i,s,o):this.resourceStore.getResource(r,i,s,o)}}],[{key:"hasDefaultValue",value:function(r){var i="defaultValue";for(var s in r)if(Object.prototype.hasOwnProperty.call(r,s)&&i===s.substring(0,i.length)&&r[s]!==void 0)return!0;return!1}}]),t}(z);function tt(a){return a.charAt(0).toUpperCase()+a.slice(1)}var At=function(){function a(e){T(this,a),this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=F.create("languageUtils")}return $(a,[{key:"getScriptPartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return null;var n=t.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}},{key:"getLanguagePartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return t;var n=t.split("-");return this.formatLanguageCode(n[0])}},{key:"formatLanguageCode",value:function(t){if(typeof t=="string"&&t.indexOf("-")>-1){var n=["hans","hant","latn","cyrl","cans","mong","arab"],r=t.split("-");return this.options.lowerCaseLng?r=r.map(function(i){return i.toLowerCase()}):r.length===2?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=tt(r[1].toLowerCase()))):r.length===3&&(r[0]=r[0].toLowerCase(),r[1].length===2&&(r[1]=r[1].toUpperCase()),r[0]!=="sgn"&&r[2].length===2&&(r[2]=r[2].toUpperCase()),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=tt(r[1].toLowerCase())),n.indexOf(r[2].toLowerCase())>-1&&(r[2]=tt(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}},{key:"isSupportedCode",value:function(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}},{key:"getBestMatchFromCodes",value:function(t){var n=this;if(!t)return null;var r;return t.forEach(function(i){if(!r){var s=n.formatLanguageCode(i);(!n.options.supportedLngs||n.isSupportedCode(s))&&(r=s)}}),!r&&this.options.supportedLngs&&t.forEach(function(i){if(!r){var s=n.getLanguagePartFromCode(i);if(n.isSupportedCode(s))return r=s;r=n.options.supportedLngs.find(function(o){if(o===s)return o;if(!(o.indexOf("-")<0&&s.indexOf("-")<0)&&o.indexOf(s)===0)return o})}}),r||(r=this.getFallbackCodes(this.options.fallbackLng)[0]),r}},{key:"getFallbackCodes",value:function(t,n){if(!t)return[];if(typeof t=="function"&&(t=t(n)),typeof t=="string"&&(t=[t]),Object.prototype.toString.apply(t)==="[object Array]")return t;if(!n)return t.default||[];var r=t[n];return r||(r=t[this.getScriptPartFromCode(n)]),r||(r=t[this.formatLanguageCode(n)]),r||(r=t[this.getLanguagePartFromCode(n)]),r||(r=t.default),r||[]}},{key:"toResolveHierarchy",value:function(t,n){var r=this,i=this.getFallbackCodes(n||this.options.fallbackLng||[],t),s=[],o=function(l){l&&(r.isSupportedCode(l)?s.push(l):r.logger.warn("rejecting language code not found in supportedLngs: ".concat(l)))};return typeof t=="string"&&t.indexOf("-")>-1?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(t))):typeof t=="string"&&o(this.formatLanguageCode(t)),i.forEach(function(u){s.indexOf(u)<0&&o(r.formatLanguageCode(u))}),s}}]),a}(),Ir=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],Fr={1:function(e){return+(e>1)},2:function(e){return+(e!=1)},3:function(e){return 0},4:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},5:function(e){return e==0?0:e==1?1:e==2?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},6:function(e){return e==1?0:e>=2&&e<=4?1:2},7:function(e){return e==1?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},8:function(e){return e==1?0:e==2?1:e!=8&&e!=11?2:3},9:function(e){return+(e>=2)},10:function(e){return e==1?0:e==2?1:e<7?2:e<11?3:4},11:function(e){return e==1||e==11?0:e==2||e==12?1:e>2&&e<20?2:3},12:function(e){return+(e%10!=1||e%100==11)},13:function(e){return+(e!==0)},14:function(e){return e==1?0:e==2?1:e==3?2:3},15:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2},16:function(e){return e%10==1&&e%100!=11?0:e!==0?1:2},17:function(e){return e==1||e%10==1&&e%100!=11?0:1},18:function(e){return e==0?0:e==1?1:2},19:function(e){return e==1?0:e==0||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3},20:function(e){return e==1?0:e==0||e%100>0&&e%100<20?1:2},21:function(e){return e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0},22:function(e){return e==1?0:e==2?1:(e<0||e>10)&&e%10==0?2:3}},$r=["v1","v2","v3"],Ct={zero:0,one:1,two:2,few:3,many:4,other:5};function Tr(){var a={};return Ir.forEach(function(e){e.lngs.forEach(function(t){a[t]={numbers:e.nr,plurals:Fr[e.fc]}})}),a}var Dr=function(){function a(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};T(this,a),this.languageUtils=e,this.options=t,this.logger=F.create("pluralResolver"),(!this.options.compatibilityJSON||this.options.compatibilityJSON==="v4")&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=Tr()}return $(a,[{key:"addRule",value:function(t,n){this.rules[t]=n}},{key:"getRule",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(t,{type:n.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}},{key:"needsPlural",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(t,n);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(t,r).map(function(i){return"".concat(n).concat(i)})}},{key:"getSuffixes",value:function(t){var n=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=this.getRule(t,r);return i?this.shouldUseIntlApi()?i.resolvedOptions().pluralCategories.sort(function(s,o){return Ct[s]-Ct[o]}).map(function(s){return"".concat(n.options.prepend).concat(s)}):i.numbers.map(function(s){return n.getSuffix(t,s,r)}):[]}},{key:"getSuffix",value:function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=this.getRule(t,r);return i?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(i.select(n)):this.getSuffixRetroCompatible(i,n):(this.logger.warn("no plural rule found for: ".concat(t)),"")}},{key:"getSuffixRetroCompatible",value:function(t,n){var r=this,i=t.noAbs?t.plurals(n):t.plurals(Math.abs(n)),s=t.numbers[i];this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1&&(s===2?s="plural":s===1&&(s=""));var o=function(){return r.options.prepend&&s.toString()?r.options.prepend+s.toString():s.toString()};return this.options.compatibilityJSON==="v1"?s===1?"":typeof s=="number"?"_plural_".concat(s.toString()):o():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1?o():this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString()}},{key:"shouldUseIntlApi",value:function(){return!$r.includes(this.options.compatibilityJSON)}}]),a}();function Nt(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),t.push.apply(t,n)}return t}function A(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Nt(Object(t),!0).forEach(function(n){H(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):Nt(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}function It(a,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=xr(a,e,t);return!i&&r&&typeof t=="string"&&(i=Ue(a,t,n),i===void 0&&(i=Ue(e,t,n))),i}var _r=function(){function a(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};T(this,a),this.logger=F.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||function(t){return t},this.init(e)}return $(a,[{key:"init",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});var n=t.interpolation;this.escape=n.escape!==void 0?n.escape:Lr,this.escapeValue=n.escapeValue!==void 0?n.escapeValue:!0,this.useRawValueToEscape=n.useRawValueToEscape!==void 0?n.useRawValueToEscape:!1,this.prefix=n.prefix?re(n.prefix):n.prefixEscaped||"{{",this.suffix=n.suffix?re(n.suffix):n.suffixEscaped||"}}",this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||",",this.unescapePrefix=n.unescapeSuffix?"":n.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":n.unescapeSuffix||"",this.nestingPrefix=n.nestingPrefix?re(n.nestingPrefix):n.nestingPrefixEscaped||re("$t("),this.nestingSuffix=n.nestingSuffix?re(n.nestingSuffix):n.nestingSuffixEscaped||re(")"),this.nestingOptionsSeparator=n.nestingOptionsSeparator?n.nestingOptionsSeparator:n.nestingOptionsSeparator||",",this.maxReplaces=n.maxReplaces?n.maxReplaces:1e3,this.alwaysFormat=n.alwaysFormat!==void 0?n.alwaysFormat:!1,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var t="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(t,"g");var n="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(n,"g");var r="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(r,"g")}},{key:"interpolate",value:function(t,n,r,i){var s=this,o,u,l,f=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function c(m){return m.replace(/\$/g,"$$$$")}var g=function(d){if(d.indexOf(s.formatSeparator)<0){var v=It(n,f,d,s.options.keySeparator,s.options.ignoreJSONStructure);return s.alwaysFormat?s.format(v,void 0,r,A(A(A({},i),n),{},{interpolationkey:d})):v}var O=d.split(s.formatSeparator),S=O.shift().trim(),j=O.join(s.formatSeparator).trim();return s.format(It(n,f,S,s.options.keySeparator,s.options.ignoreJSONStructure),j,r,A(A(A({},i),n),{},{interpolationkey:S}))};this.resetRegExp();var h=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler,p=i&&i.interpolation&&i.interpolation.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables,y=[{regex:this.regexpUnescape,safeValue:function(d){return c(d)}},{regex:this.regexp,safeValue:function(d){return s.escapeValue?c(s.escape(d)):c(d)}}];return y.forEach(function(m){for(l=0;o=m.regex.exec(t);){var d=o[1].trim();if(u=g(d),u===void 0)if(typeof h=="function"){var v=h(t,o,i);u=typeof v=="string"?v:""}else if(i&&Object.prototype.hasOwnProperty.call(i,d))u="";else if(p){u=o[0];continue}else s.logger.warn("missed to pass in variable ".concat(d," for interpolating ").concat(t)),u="";else typeof u!="string"&&!s.useRawValueToEscape&&(u=Rt(u));var O=m.safeValue(u);if(t=t.replace(o[0],O),p?(m.regex.lastIndex+=u.length,m.regex.lastIndex-=o[0].length):m.regex.lastIndex=0,l++,l>=s.maxReplaces)break}}),t}},{key:"nest",value:function(t,n){var r=this,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s,o,u;function l(h,p){var y=this.nestingOptionsSeparator;if(h.indexOf(y)<0)return h;var m=h.split(new RegExp("".concat(y,"[ ]*{"))),d="{".concat(m[1]);h=m[0],d=this.interpolate(d,u);var v=d.match(/'/g),O=d.match(/"/g);(v&&v.length%2===0&&!O||O.length%2!==0)&&(d=d.replace(/'/g,'"'));try{u=JSON.parse(d),p&&(u=A(A({},p),u))}catch(S){return this.logger.warn("failed parsing options string in nesting for key ".concat(h),S),"".concat(h).concat(y).concat(d)}return delete u.defaultValue,h}for(;s=this.nestingRegexp.exec(t);){var f=[];u=A({},i),u=u.replace&&typeof u.replace!="string"?u.replace:u,u.applyPostProcessor=!1,delete u.defaultValue;var c=!1;if(s[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(s[1])){var g=s[1].split(this.formatSeparator).map(function(h){return h.trim()});s[1]=g.shift(),f=g,c=!0}if(o=n(l.call(this,s[1].trim(),u),u),o&&s[0]===t&&typeof o!="string")return o;typeof o!="string"&&(o=Rt(o)),o||(this.logger.warn("missed to resolve ".concat(s[1]," for nesting ").concat(t)),o=""),c&&(o=f.reduce(function(h,p){return r.format(h,p,i.lng,A(A({},i),{},{interpolationkey:s[1].trim()}))},o.trim())),t=t.replace(s[0],o),this.regexp.lastIndex=0}return t}}]),a}();function Ft(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),t.push.apply(t,n)}return t}function _(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ft(Object(t),!0).forEach(function(n){H(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):Ft(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}function Kr(a){var e=a.toLowerCase().trim(),t={};if(a.indexOf("(")>-1){var n=a.split("(");e=n[0].toLowerCase().trim();var r=n[1].substring(0,n[1].length-1);if(e==="currency"&&r.indexOf(":")<0)t.currency||(t.currency=r.trim());else if(e==="relativetime"&&r.indexOf(":")<0)t.range||(t.range=r.trim());else{var i=r.split(";");i.forEach(function(s){if(s){var o=s.split(":"),u=tr(o),l=u[0],f=u.slice(1),c=f.join(":").trim().replace(/^'+|'+$/g,"");t[l.trim()]||(t[l.trim()]=c),c==="false"&&(t[l.trim()]=!1),c==="true"&&(t[l.trim()]=!0),isNaN(c)||(t[l.trim()]=parseInt(c,10))}})}}return{formatName:e,formatOptions:t}}function ne(a){var e={};return function(n,r,i){var s=r+JSON.stringify(i),o=e[s];return o||(o=a(r,i),e[s]=o),o(n)}}var Ur=function(){function a(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};T(this,a),this.logger=F.create("formatter"),this.options=e,this.formats={number:ne(function(t,n){var r=new Intl.NumberFormat(t,_({},n));return function(i){return r.format(i)}}),currency:ne(function(t,n){var r=new Intl.NumberFormat(t,_(_({},n),{},{style:"currency"}));return function(i){return r.format(i)}}),datetime:ne(function(t,n){var r=new Intl.DateTimeFormat(t,_({},n));return function(i){return r.format(i)}}),relativetime:ne(function(t,n){var r=new Intl.RelativeTimeFormat(t,_({},n));return function(i){return r.format(i,n.range||"day")}}),list:ne(function(t,n){var r=new Intl.ListFormat(t,_({},n));return function(i){return r.format(i)}})},this.init(e)}return $(a,[{key:"init",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}},r=n.interpolation;this.formatSeparator=r.formatSeparator?r.formatSeparator:r.formatSeparator||","}},{key:"add",value:function(t,n){this.formats[t.toLowerCase().trim()]=n}},{key:"addCached",value:function(t,n){this.formats[t.toLowerCase().trim()]=ne(n)}},{key:"format",value:function(t,n,r){var i=this,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},o=n.split(this.formatSeparator),u=o.reduce(function(l,f){var c=Kr(f),g=c.formatName,h=c.formatOptions;if(i.formats[g]){var p=l;try{var y=s&&s.formatParams&&s.formatParams[s.interpolationkey]||{},m=y.locale||y.lng||s.locale||s.lng||r;p=i.formats[g](l,m,_(_(_({},h),s),y))}catch(d){i.logger.warn(d)}return p}else i.logger.warn("there was no format function for ".concat(g));return l},t);return u}}]),a}();function $t(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),t.push.apply(t,n)}return t}function Tt(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?$t(Object(t),!0).forEach(function(n){H(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):$t(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}function Vr(a){var e=Mr();return function(){var n=q(a),r;if(e){var i=q(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return je(this,r)}}function Mr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Br(a,e){a.pending[e]!==void 0&&(delete a.pending[e],a.pendingCount--)}var qr=function(a){qe(t,a);var e=Vr(t);function t(n,r,i){var s,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return T(this,t),s=e.call(this),Je&&z.call(X(s)),s.backend=n,s.store=r,s.services=i,s.languageUtils=i.languageUtils,s.options=o,s.logger=F.create("backendConnector"),s.waitingReads=[],s.maxParallelReads=o.maxParallelReads||10,s.readingCalls=0,s.maxRetries=o.maxRetries>=0?o.maxRetries:5,s.retryTimeout=o.retryTimeout>=1?o.retryTimeout:350,s.state={},s.queue=[],s.backend&&s.backend.init&&s.backend.init(i,o.backend,o),s}return $(t,[{key:"queueLoad",value:function(r,i,s,o){var u=this,l={},f={},c={},g={};return r.forEach(function(h){var p=!0;i.forEach(function(y){var m="".concat(h,"|").concat(y);!s.reload&&u.store.hasResourceBundle(h,y)?u.state[m]=2:u.state[m]<0||(u.state[m]===1?f[m]===void 0&&(f[m]=!0):(u.state[m]=1,p=!1,f[m]===void 0&&(f[m]=!0),l[m]===void 0&&(l[m]=!0),g[y]===void 0&&(g[y]=!0)))}),p||(c[h]=!0)}),(Object.keys(l).length||Object.keys(f).length)&&this.queue.push({pending:f,pendingCount:Object.keys(f).length,loaded:{},errors:[],callback:o}),{toLoad:Object.keys(l),pending:Object.keys(f),toLoadLanguages:Object.keys(c),toLoadNamespaces:Object.keys(g)}}},{key:"loaded",value:function(r,i,s){var o=r.split("|"),u=o[0],l=o[1];i&&this.emit("failedLoading",u,l,i),s&&this.store.addResourceBundle(u,l,s),this.state[r]=i?-1:2;var f={};this.queue.forEach(function(c){Or(c.loaded,[u],l),Br(c,r),i&&c.errors.push(i),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(function(g){f[g]||(f[g]={});var h=c.loaded[g];h.length&&h.forEach(function(p){f[g][p]===void 0&&(f[g][p]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",f),this.queue=this.queue.filter(function(c){return!c.done})}},{key:"read",value:function(r,i,s){var o=this,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,f=arguments.length>5?arguments[5]:void 0;if(!r.length)return f(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:r,ns:i,fcName:s,tried:u,wait:l,callback:f});return}this.readingCalls++;var c=function(y,m){if(o.readingCalls--,o.waitingReads.length>0){var d=o.waitingReads.shift();o.read(d.lng,d.ns,d.fcName,d.tried,d.wait,d.callback)}if(y&&m&&u<o.maxRetries){setTimeout(function(){o.read.call(o,r,i,s,u+1,l*2,f)},l);return}f(y,m)},g=this.backend[s].bind(this.backend);if(g.length===2){try{var h=g(r,i);h&&typeof h.then=="function"?h.then(function(p){return c(null,p)}).catch(c):c(null,h)}catch(p){c(p)}return}return g(r,i,c)}},{key:"prepareLoading",value:function(r,i){var s=this,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),u&&u();typeof r=="string"&&(r=this.languageUtils.toResolveHierarchy(r)),typeof i=="string"&&(i=[i]);var l=this.queueLoad(r,i,o,u);if(!l.toLoad.length)return l.pending.length||u(),null;l.toLoad.forEach(function(f){s.loadOne(f)})}},{key:"load",value:function(r,i,s){this.prepareLoading(r,i,{},s)}},{key:"reload",value:function(r,i,s){this.prepareLoading(r,i,{reload:!0},s)}},{key:"loadOne",value:function(r){var i=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",o=r.split("|"),u=o[0],l=o[1];this.read(u,l,"read",void 0,void 0,function(f,c){f&&i.logger.warn("".concat(s,"loading namespace ").concat(l," for language ").concat(u," failed"),f),!f&&c&&i.logger.log("".concat(s,"loaded namespace ").concat(l," for language ").concat(u),c),i.loaded(r,f,c)})}},{key:"saveMissing",value:function(r,i,s,o,u){var l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},f=arguments.length>6&&arguments[6]!==void 0?arguments[6]:function(){};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(i)){this.logger.warn('did not save key "'.concat(s,'" as the namespace "').concat(i,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(s==null||s==="")){if(this.backend&&this.backend.create){var c=Tt(Tt({},l),{},{isUpdate:u}),g=this.backend.create.bind(this.backend);if(g.length<6)try{var h;g.length===5?h=g(r,i,s,o,c):h=g(r,i,s,o),h&&typeof h.then=="function"?h.then(function(p){return f(null,p)}).catch(f):f(null,h)}catch(p){f(p)}else g(r,i,s,o,f,c)}!r||!r[0]||this.store.addResource(r[0],i,s,o)}}}]),t}(z);function Dt(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var t={};if(ie(e[1])==="object"&&(t=e[1]),typeof e[1]=="string"&&(t.defaultValue=e[1]),typeof e[2]=="string"&&(t.tDescription=e[2]),ie(e[2])==="object"||ie(e[3])==="object"){var n=e[3]||e[2];Object.keys(n).forEach(function(r){t[r]=n[r]})}return t},interpolation:{escapeValue:!0,format:function(e,t,n,r){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function _t(a){return typeof a.ns=="string"&&(a.ns=[a.ns]),typeof a.fallbackLng=="string"&&(a.fallbackLng=[a.fallbackLng]),typeof a.fallbackNS=="string"&&(a.fallbackNS=[a.fallbackNS]),a.supportedLngs&&a.supportedLngs.indexOf("cimode")<0&&(a.supportedLngs=a.supportedLngs.concat(["cimode"])),a}function Kt(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),t.push.apply(t,n)}return t}function I(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Kt(Object(t),!0).forEach(function(n){H(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):Kt(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}function zr(a){var e=Hr();return function(){var n=q(a),r;if(e){var i=q(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return je(this,r)}}function Hr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ne(){}function Jr(a){var e=Object.getOwnPropertyNames(Object.getPrototypeOf(a));e.forEach(function(t){typeof a[t]=="function"&&(a[t]=a[t].bind(a))})}var Ve=function(a){qe(t,a);var e=zr(t);function t(){var n,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;if(T(this,t),n=e.call(this),Je&&z.call(X(n)),n.options=_t(r),n.services={},n.logger=F,n.modules={external:[]},Jr(X(n)),i&&!n.isInitialized&&!r.isClone){if(!n.options.initImmediate)return n.init(r,i),je(n,X(n));setTimeout(function(){n.init(r,i)},0)}return n}return $(t,[{key:"init",value:function(){var r=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;typeof i=="function"&&(s=i,i={}),!i.defaultNS&&i.defaultNS!==!1&&i.ns&&(typeof i.ns=="string"?i.defaultNS=i.ns:i.ns.indexOf("translation")<0&&(i.defaultNS=i.ns[0]));var o=Dt();this.options=I(I(I({},o),this.options),_t(i)),this.options.compatibilityAPI!=="v1"&&(this.options.interpolation=I(I({},o.interpolation),this.options.interpolation)),i.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=i.keySeparator),i.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=i.nsSeparator);function u(d){return d?typeof d=="function"?new d:d:null}if(!this.options.isClone){this.modules.logger?F.init(u(this.modules.logger),this.options):F.init(null,this.options);var l;this.modules.formatter?l=this.modules.formatter:typeof Intl<"u"&&(l=Ur);var f=new At(this.options);this.store=new Ar(this.options.resources,this.options);var c=this.services;c.logger=F,c.resourceStore=this.store,c.languageUtils=f,c.pluralResolver=new Dr(f,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),l&&(!this.options.interpolation.format||this.options.interpolation.format===o.interpolation.format)&&(c.formatter=u(l),c.formatter.init(c,this.options),this.options.interpolation.format=c.formatter.format.bind(c.formatter)),c.interpolator=new _r(this.options),c.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},c.backendConnector=new qr(u(this.modules.backend),c.resourceStore,c,this.options),c.backendConnector.on("*",function(d){for(var v=arguments.length,O=new Array(v>1?v-1:0),S=1;S<v;S++)O[S-1]=arguments[S];r.emit.apply(r,[d].concat(O))}),this.modules.languageDetector&&(c.languageDetector=u(this.modules.languageDetector),c.languageDetector.init&&c.languageDetector.init(c,this.options.detection,this.options)),this.modules.i18nFormat&&(c.i18nFormat=u(this.modules.i18nFormat),c.i18nFormat.init&&c.i18nFormat.init(this)),this.translator=new Et(this.services,this.options),this.translator.on("*",function(d){for(var v=arguments.length,O=new Array(v>1?v-1:0),S=1;S<v;S++)O[S-1]=arguments[S];r.emit.apply(r,[d].concat(O))}),this.modules.external.forEach(function(d){d.init&&d.init(r)})}if(this.format=this.options.interpolation.format,s||(s=Ne),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var g=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);g.length>0&&g[0]!=="dev"&&(this.options.lng=g[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined");var h=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];h.forEach(function(d){r[d]=function(){var v;return(v=r.store)[d].apply(v,arguments)}});var p=["addResource","addResources","addResourceBundle","removeResourceBundle"];p.forEach(function(d){r[d]=function(){var v;return(v=r.store)[d].apply(v,arguments),r}});var y=me(),m=function(){var v=function(S,j){r.isInitialized&&!r.initializedStoreOnce&&r.logger.warn("init: i18next is already initialized. You should call init just once!"),r.isInitialized=!0,r.options.isClone||r.logger.log("initialized",r.options),r.emit("initialized",r.options),y.resolve(j),s(S,j)};if(r.languages&&r.options.compatibilityAPI!=="v1"&&!r.isInitialized)return v(null,r.t.bind(r));r.changeLanguage(r.options.lng,v)};return this.options.resources||!this.options.initImmediate?m():setTimeout(m,0),y}},{key:"loadResources",value:function(r){var i=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ne,o=s,u=typeof r=="string"?r:this.language;if(typeof r=="function"&&(o=r),!this.options.resources||this.options.partialBundledLanguages){if(u&&u.toLowerCase()==="cimode")return o();var l=[],f=function(h){if(h){var p=i.services.languageUtils.toResolveHierarchy(h);p.forEach(function(y){l.indexOf(y)<0&&l.push(y)})}};if(u)f(u);else{var c=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);c.forEach(function(g){return f(g)})}this.options.preload&&this.options.preload.forEach(function(g){return f(g)}),this.services.backendConnector.load(l,this.options.ns,function(g){!g&&!i.resolvedLanguage&&i.language&&i.setResolvedLanguage(i.language),o(g)})}else o(null)}},{key:"reloadResources",value:function(r,i,s){var o=me();return r||(r=this.languages),i||(i=this.options.ns),s||(s=Ne),this.services.backendConnector.reload(r,i,function(u){o.resolve(),s(u)}),o}},{key:"use",value:function(r){if(!r)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!r.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return r.type==="backend"&&(this.modules.backend=r),(r.type==="logger"||r.log&&r.warn&&r.error)&&(this.modules.logger=r),r.type==="languageDetector"&&(this.modules.languageDetector=r),r.type==="i18nFormat"&&(this.modules.i18nFormat=r),r.type==="postProcessor"&&Ht.addPostProcessor(r),r.type==="formatter"&&(this.modules.formatter=r),r.type==="3rdParty"&&this.modules.external.push(r),this}},{key:"setResolvedLanguage",value:function(r){if(!(!r||!this.languages)&&!(["cimode","dev"].indexOf(r)>-1))for(var i=0;i<this.languages.length;i++){var s=this.languages[i];if(!(["cimode","dev"].indexOf(s)>-1)&&this.store.hasLanguageSomeTranslations(s)){this.resolvedLanguage=s;break}}}},{key:"changeLanguage",value:function(r,i){var s=this;this.isLanguageChangingTo=r;var o=me();this.emit("languageChanging",r);var u=function(g){s.language=g,s.languages=s.services.languageUtils.toResolveHierarchy(g),s.resolvedLanguage=void 0,s.setResolvedLanguage(g)},l=function(g,h){h?(u(h),s.translator.changeLanguage(h),s.isLanguageChangingTo=void 0,s.emit("languageChanged",h),s.logger.log("languageChanged",h)):s.isLanguageChangingTo=void 0,o.resolve(function(){return s.t.apply(s,arguments)}),i&&i(g,function(){return s.t.apply(s,arguments)})},f=function(g){!r&&!g&&s.services.languageDetector&&(g=[]);var h=typeof g=="string"?g:s.services.languageUtils.getBestMatchFromCodes(g);h&&(s.language||u(h),s.translator.language||s.translator.changeLanguage(h),s.services.languageDetector&&s.services.languageDetector.cacheUserLanguage&&s.services.languageDetector.cacheUserLanguage(h)),s.loadResources(h,function(p){l(p,h)})};return!r&&this.services.languageDetector&&!this.services.languageDetector.async?f(this.services.languageDetector.detect()):!r&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(f):this.services.languageDetector.detect(f):f(r),o}},{key:"getFixedT",value:function(r,i,s){var o=this,u=function l(f,c){var g;if(ie(c)!=="object"){for(var h=arguments.length,p=new Array(h>2?h-2:0),y=2;y<h;y++)p[y-2]=arguments[y];g=o.options.overloadTranslationOptionHandler([f,c].concat(p))}else g=I({},c);g.lng=g.lng||l.lng,g.lngs=g.lngs||l.lngs,g.ns=g.ns||l.ns,g.keyPrefix=g.keyPrefix||s||l.keyPrefix;var m=o.options.keySeparator||".",d;return g.keyPrefix&&Array.isArray(f)?d=f.map(function(v){return"".concat(g.keyPrefix).concat(m).concat(v)}):d=g.keyPrefix?"".concat(g.keyPrefix).concat(m).concat(f):f,o.t(d,g)};return typeof r=="string"?u.lng=r:u.lngs=r,u.ns=i,u.keyPrefix=s,u}},{key:"t",value:function(){var r;return this.translator&&(r=this.translator).translate.apply(r,arguments)}},{key:"exists",value:function(){var r;return this.translator&&(r=this.translator).exists.apply(r,arguments)}},{key:"setDefaultNamespace",value:function(r){this.options.defaultNS=r}},{key:"hasLoadedNamespace",value:function(r){var i=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var o=s.lng||this.resolvedLanguage||this.languages[0],u=this.options?this.options.fallbackLng:!1,l=this.languages[this.languages.length-1];if(o.toLowerCase()==="cimode")return!0;var f=function(h,p){var y=i.services.backendConnector.state["".concat(h,"|").concat(p)];return y===-1||y===2};if(s.precheck){var c=s.precheck(this,f);if(c!==void 0)return c}return!!(this.hasResourceBundle(o,r)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||f(o,r)&&(!u||f(l,r)))}},{key:"loadNamespaces",value:function(r,i){var s=this,o=me();return this.options.ns?(typeof r=="string"&&(r=[r]),r.forEach(function(u){s.options.ns.indexOf(u)<0&&s.options.ns.push(u)}),this.loadResources(function(u){o.resolve(),i&&i(u)}),o):(i&&i(),Promise.resolve())}},{key:"loadLanguages",value:function(r,i){var s=me();typeof r=="string"&&(r=[r]);var o=this.options.preload||[],u=r.filter(function(l){return o.indexOf(l)<0});return u.length?(this.options.preload=o.concat(u),this.loadResources(function(l){s.resolve(),i&&i(l)}),s):(i&&i(),Promise.resolve())}},{key:"dir",value:function(r){if(r||(r=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!r)return"rtl";var i=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],s=this.services&&this.services.languageUtils||new At(Dt());return i.indexOf(s.getLanguagePartFromCode(r))>-1||r.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function(){var r=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ne,o=I(I(I({},this.options),i),{isClone:!0}),u=new t(o);(i.debug!==void 0||i.prefix!==void 0)&&(u.logger=u.logger.clone(i));var l=["store","services","language"];return l.forEach(function(f){u[f]=r[f]}),u.services=I({},this.services),u.services.utils={hasLoadedNamespace:u.hasLoadedNamespace.bind(u)},u.translator=new Et(u.services,u.options),u.translator.on("*",function(f){for(var c=arguments.length,g=new Array(c>1?c-1:0),h=1;h<c;h++)g[h-1]=arguments[h];u.emit.apply(u,[f].concat(g))}),u.init(o,s),u.translator.options=u.options,u.translator.backendConnector.services.utils={hasLoadedNamespace:u.hasLoadedNamespace.bind(u)},u}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),t}(z);H(Ve,"createInstance",function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return new Ve(a,e)});var P=Ve.createInstance();P.createInstance=Ve.createInstance;var Jt=P.createInstance;P.dir;P.init;P.loadResources;P.reloadResources;P.use;P.changeLanguage;P.getFixedT;P.t;P.exists;P.setDefaultNamespace;P.hasLoadedNamespace;P.loadNamespaces;P.loadLanguages;function Ut(a){return Object.fromEntries(Object.entries(a).filter(e=>e[1]!==null))}var W,be,Y,ae,De;class Gr{constructor(e){x(this,ae);x(this,W,new Set);x(this,be,new Map);x(this,Y,new Map);this.onLoad=e}addTranslationResource(e){const t=rr(e);for(const n of t.resources){const r=N(this,ae,De).call(this,n.language,t.id);b(this,Y).has(r)||b(this,Y).set(r,n.loader)}}needsLoading(e,t){const n=N(this,ae,De).call(this,e,t);return b(this,Y).get(n)?!b(this,W).has(n):!1}async load(e,t){const n=N(this,ae,De).call(this,e,t),r=b(this,Y).get(n);if(!r||b(this,W).has(n))return;const i=b(this,be).get(n);if(i){await i;return}const s=r().then(o=>{this.onLoad({language:e,namespace:t,messages:o.messages}),b(this,W).add(n)},o=>{throw b(this,W).add(n),o});b(this,be).set(n,s),await s}}W=new WeakMap,be=new WeakMap,Y=new WeakMap,ae=new WeakSet,De=function(e,t){return`${e}/${t}`};var we,Se,Oe;const ot=class ot{constructor(e,t){x(this,we);x(this,Se);x(this,Oe);L(this,we,t),L(this,Se,e),L(this,Oe,new RegExp(`\\$${e}\\(([^)]+)\\)`))}static fromI18n(e){const t=e.services.interpolator,n=t.format;let r;return t.format=(i,s,o,u)=>s?n(i,s,o,u):(r==null?void 0:r(i,s,o,u))??i,new ot(Math.random().toString(36).substring(2,8),i=>{r=i})}wrapT(e){return(t,n)=>{let r;b(this,we).call(this,o=>{if(Ze.isValidElement(o)){r||(r=new Map);const u=r.size.toString();return r.set(u,o),`$${b(this,Se)}(${u})`}return o});const i=e(t,n);if(!r)return i;const s=i.split(b(this,Oe));return Ze.createElement(Ze.Fragment,null,...s.map((o,u)=>u%2===0?o:r==null?void 0:r.get(o)).filter(Boolean))}}};we=new WeakMap,Se=new WeakMap,Oe=new WeakMap;let Me=ot;var Q,M,K,xe,Re,oe,C,Gt,_e,st;const ut=class ut{constructor(e,t,n,r){x(this,C);x(this,Q);x(this,M);x(this,K);x(this,xe);x(this,Re,new Set);x(this,oe,new Set);L(this,Q,e),L(this,M,t),L(this,K,n),L(this,xe,r)}static create(e){const{languages:t}=e.languageApi.getAvailableLanguages(),n=Jt({fallbackLng:U,supportedLngs:t,interpolation:{escapeValue:!1,alwaysFormat:!0},ns:[],defaultNS:!1,fallbackNS:!1,initImmediate:!1});if(n.init(),!n.isInitialized)throw new Error("i18next was unexpectedly not initialized");const r=Me.fromI18n(n),{language:i}=e.languageApi.getLanguage();i!==U&&n.changeLanguage(i);const s=new Gr(l=>{n.addResourceBundle(l.language,l.namespace,Ut(l.messages),!1,!0)}),o=(e==null?void 0:e.resources)||[];for(let l=o.length-1;l>=0;l--){const f=o[l];f.$$type==="@backstage/TranslationResource"?s.addTranslationResource(f):f.$$type==="@backstage/TranslationMessages"&&n.addResourceBundle(U,f.id,Ut(f.messages),!0,!1)}const u=new ut(n,s,e.languageApi.getLanguage().language,r);return e.languageApi.language$().subscribe(({language:l})=>{var f;N(f=u,C,Gt).call(f,l)}),u}getTranslation(e){const t=nt(e);return N(this,C,st).call(this,t),N(this,C,_e).call(this,t)}translation$(e){const t=nt(e);return N(this,C,st).call(this,t),new ze(n=>{let r={};const i=()=>{r={};const o=r;b(this,M).load(b(this,K),t.id).then(()=>{if(o===r){const u=N(this,C,_e).call(this,t);u.ready&&n.next(u)}},u=>{o===r&&n.error(Array.isArray(u)?u[0]:u)})},s=()=>{const o=N(this,C,_e).call(this,t);o.ready?n.next(o):i()};return b(this,M).needsLoading(b(this,K),t.id)&&i(),b(this,oe).add(s),()=>{b(this,oe).delete(s)}})}};Q=new WeakMap,M=new WeakMap,K=new WeakMap,xe=new WeakMap,Re=new WeakMap,oe=new WeakMap,C=new WeakSet,Gt=function(e){b(this,K)!==e&&(L(this,K,e),b(this,Q).changeLanguage(e),b(this,oe).forEach(t=>t()))},_e=function(e){if(b(this,M).needsLoading(b(this,K),e.id))return{ready:!1};const t=b(this,Q).getFixedT(null,e.id);return{ready:!0,t:b(this,xe).wrapT(t)}},st=function(e){if(b(this,Re).has(e.id))return;b(this,Re).add(e.id);const t=e.getDefaultMessages();b(this,Q).addResourceBundle(U,e.id,t,!0,!1);const n=e.getDefaultResource();n&&b(this,M).addTranslationResource(n)};let Vt=ut;const rt="en";var ue,Le,Pe;const ct=class ct{constructor(e,t){x(this,ue);x(this,Le);x(this,Pe,new Set);L(this,ue,e),L(this,Le,t)}static create(){const e=Jt({fallbackLng:rt,supportedLngs:[rt],interpolation:{escapeValue:!1,alwaysFormat:!0},ns:[],defaultNS:!1,fallbackNS:!1,initImmediate:!1});if(e.init(),!e.isInitialized)throw new Error("i18next was unexpectedly not initialized");const t=Me.fromI18n(e);return new ct(e,t)}getTranslation(e){const t=nt(e);return b(this,Pe).has(t.id)||(b(this,Pe).add(t.id),b(this,ue).addResourceBundle(rt,t.id,t.getDefaultMessages(),!1,!0)),{ready:!0,t:b(this,Le).wrapT(b(this,ue).getFixedT(null,t.id))}}translation$(){return new ze(e=>()=>{})}};ue=new WeakMap,Le=new WeakMap,Pe=new WeakMap;let Mt=ct;export{Sn as A,He as B,Te as C,On as E,bn as G,Vt as I,Rn as L,Mt as M,wn as O,hn as a,mn as b,yn as c,Ln as d,an as e,dn as f,sn as g,un as h,pn as i,on as j,xn as k,B as l,St as m,cn as n,vn as o,ln as p,fn as q,gn as r};
